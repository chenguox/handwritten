<template>
  <div class="app">
    <h4>mapMutations</h4>
    <h4>Store Counter: {{ $store.state.counter }}</h4>
    <button @click="increment">åŠ ä¸€</button>
    <button @click="cIncrement">åŠ ä¸€</button>

    <h4>Store Message: {{ $store.state.message }}</h4>
    <button @click="changeMessage('ä½ å¥½å•Š, æŽé“¶æ²³!')">ä¿®æ”¹message</button>
    <button @click="cChangeMessage('ä½ å¥½å•Š, æŽé“¶æ²³!')">ä¿®æ”¹message</button>

    <button @click="changeInfo({ newInfo: 'ðŸ†˜' })">ä¿®æ”¹info</button>
    <button @click="cChangeInfo({ newInfo: 'ðŸ†˜' })">ä¿®æ”¹info</button>
  </div>
</template>

<script>
import { mapMutations } from 'vuex'
import { CHANGE_INFO } from '../05_Mutationçš„åŸºæœ¬ä½¿ç”¨/store/constant'

export default {
  methods: {
    ...mapMutations(['increment', 'changeMessage', CHANGE_INFO]),
  },
}
</script>

<script setup>
import { mapMutations, useStore } from 'vuex'
import { CHANGE_INFO } from '../05_Mutationçš„åŸºæœ¬ä½¿ç”¨/store/constant'

const store = useStore()

// æ‰‹åŠ¨çš„æ˜ å°„å’Œç»‘å®š
const mutations = mapMutations(['increment', 'changeMessage', CHANGE_INFO])
console.log(mutations)
const newMutations = {}
Object.keys(mutations).forEach((key) => {
  newMutations[key] = mutations[key].bind({ $store: store })
})
const {
  increment: cIncrement,
  changeMessage: cChangeMessage,
  changeInfo: cChangeInfo,
} = newMutations
</script>
